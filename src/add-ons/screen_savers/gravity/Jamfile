SubDir HAIKU_TOP src add-ons screen_savers gravity ;
UseBuildFeatureHeaders glu ;
UseBuildFeatureHeaders mesa ;

# For GCC2
if $(TARGET_GCC_VERSION_$(TARGET_PACKAGING_ARCH)[1]) < 3 {
	SubDirC++Flags --no-warnings ;
}

AddResources Gravity : Gravity.rdef ;

local sources =
	ColorItem.cpp
	ConfigView.cpp
	Gravity.cpp
	GravitySource.cpp
	GravityView.cpp
	Particle.cpp
	RainbowItem.cpp
	main.cpp
;

Includes [ FGristFiles $(sources) ] :
	[ BuildFeatureAttribute glu : headers ]
	[ BuildFeatureAttribute mesa : headers ]
	;
	# Dependency needed to trigger downloading/unzipping the package before
	# compiling the files.

ScreenSaver Gravity :
	$(sources)
	:
	be screensaver localestub [ TargetLibstdc++ ]
	[ BuildFeatureAttribute glu : library ]
	[ BuildFeatureAttribute mesa : library ]
;

DoCatalogs Gravity :
	x-vnd.Haiku-GravityScreensaver
	:
	$(sources)
;
